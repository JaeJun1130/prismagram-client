[{"D:\\prismagram-client\\src\\index.js":"1","D:\\prismagram-client\\src\\Components\\App.js":"2","D:\\prismagram-client\\src\\Apollo\\Client.js":"3","D:\\prismagram-client\\src\\Styles\\Theme.js":"4","D:\\prismagram-client\\src\\Styles\\GlobalStyles.js":"5","D:\\prismagram-client\\src\\Components\\Footer.js":"6","D:\\prismagram-client\\src\\Components\\Routers.js":"7","D:\\prismagram-client\\src\\Components\\Header.js":"8","D:\\prismagram-client\\src\\Components\\Input.js":"9","D:\\prismagram-client\\src\\Components\\Icons.js":"10","D:\\prismagram-client\\src\\Routes\\Auth\\index.js":"11","D:\\prismagram-client\\src\\Routes\\Feed\\index.js":"12","D:\\prismagram-client\\src\\Routes\\Explore\\index.js":"13","D:\\prismagram-client\\src\\Routes\\Profile\\index.js":"14","D:\\prismagram-client\\src\\Routes\\Search\\index.js":"15","D:\\prismagram-client\\src\\Routes\\Feed\\FeedContainer.js":"16","D:\\prismagram-client\\src\\Routes\\Explore\\ExploreContainer.js":"17","D:\\prismagram-client\\src\\Routes\\Profile\\ProfilePresenter.js":"18","D:\\prismagram-client\\src\\Routes\\Search\\SearchContainer.js":"19","D:\\prismagram-client\\src\\Routes\\Auth\\AuthContainer.js":"20","D:\\prismagram-client\\src\\Routes\\Feed\\FeedPresenter.js":"21","D:\\prismagram-client\\src\\Routes\\Explore\\ExplorePresenter.js":"22","D:\\prismagram-client\\src\\Routes\\Auth\\AuthMutation.js":"23","D:\\prismagram-client\\src\\Routes\\Search\\SearchPresenter.js":"24","D:\\prismagram-client\\src\\Routes\\Auth\\AuthPresenter.js":"25","D:\\prismagram-client\\src\\Components\\Logo.js":"26","D:\\prismagram-client\\src\\Components\\Button.js":"27","D:\\prismagram-client\\src\\Routes\\Feed\\FeedMutation.js":"28","D:\\prismagram-client\\src\\Components\\Loader.js":"29"},{"size":323,"mtime":1609859411509,"results":"30","hashOfConfig":"31"},{"size":1267,"mtime":1610633170158,"results":"32","hashOfConfig":"31"},{"size":585,"mtime":1610456282868,"results":"33","hashOfConfig":"31"},{"size":546,"mtime":1610287825858,"results":"34","hashOfConfig":"31"},{"size":758,"mtime":1610288919156,"results":"35","hashOfConfig":"31"},{"size":1757,"mtime":1610460505602,"results":"36","hashOfConfig":"31"},{"size":923,"mtime":1610456282870,"results":"37","hashOfConfig":"31"},{"size":3059,"mtime":1610459486732,"results":"38","hashOfConfig":"31"},{"size":782,"mtime":1610301836526,"results":"39","hashOfConfig":"31"},{"size":4464,"mtime":1610462420173,"results":"40","hashOfConfig":"31"},{"size":79,"mtime":1609699330489,"results":"41","hashOfConfig":"31"},{"size":79,"mtime":1609700197287,"results":"42","hashOfConfig":"31"},{"size":88,"mtime":1610456282871,"results":"43","hashOfConfig":"31"},{"size":88,"mtime":1610456282871,"results":"44","hashOfConfig":"31"},{"size":85,"mtime":1610456282872,"results":"45","hashOfConfig":"31"},{"size":344,"mtime":1610633243900,"results":"46","hashOfConfig":"31"},{"size":190,"mtime":1609701150695,"results":"47","hashOfConfig":"31"},{"size":134,"mtime":1610456282871,"results":"48","hashOfConfig":"31"},{"size":183,"mtime":1610456282872,"results":"49","hashOfConfig":"31"},{"size":4232,"mtime":1610458438307,"results":"50","hashOfConfig":"31"},{"size":571,"mtime":1610633300308,"results":"51","hashOfConfig":"31"},{"size":136,"mtime":1609701156886,"results":"52","hashOfConfig":"31"},{"size":694,"mtime":1610163486289,"results":"53","hashOfConfig":"31"},{"size":131,"mtime":1610456282872,"results":"54","hashOfConfig":"31"},{"size":5876,"mtime":1610131913836,"results":"55","hashOfConfig":"31"},{"size":386,"mtime":1609941508369,"results":"56","hashOfConfig":"31"},{"size":505,"mtime":1609944151053,"results":"57","hashOfConfig":"31"},{"size":431,"mtime":1610461291385,"results":"58","hashOfConfig":"31"},{"size":459,"mtime":1610462765385,"results":"59","hashOfConfig":"31"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},"4c7tq9",{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"62"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},"D:\\prismagram-client\\src\\index.js",[],["120","121"],"D:\\prismagram-client\\src\\Components\\App.js",[],"D:\\prismagram-client\\src\\Apollo\\Client.js",[],"D:\\prismagram-client\\src\\Styles\\Theme.js",[],"D:\\prismagram-client\\src\\Styles\\GlobalStyles.js",[],"D:\\prismagram-client\\src\\Components\\Footer.js",[],"D:\\prismagram-client\\src\\Components\\Routers.js",[],"D:\\prismagram-client\\src\\Components\\Header.js",[],"D:\\prismagram-client\\src\\Components\\Input.js",[],"D:\\prismagram-client\\src\\Components\\Icons.js",[],"D:\\prismagram-client\\src\\Routes\\Auth\\index.js",[],"D:\\prismagram-client\\src\\Routes\\Feed\\index.js",[],"D:\\prismagram-client\\src\\Routes\\Explore\\index.js",[],"D:\\prismagram-client\\src\\Routes\\Profile\\index.js",[],"D:\\prismagram-client\\src\\Routes\\Search\\index.js",[],"D:\\prismagram-client\\src\\Routes\\Feed\\FeedContainer.js",[],"D:\\prismagram-client\\src\\Routes\\Explore\\ExploreContainer.js",[],"D:\\prismagram-client\\src\\Routes\\Profile\\ProfilePresenter.js",[],"D:\\prismagram-client\\src\\Routes\\Search\\SearchContainer.js",[],"D:\\prismagram-client\\src\\Routes\\Auth\\AuthContainer.js",["122"],"import React, { useState } from \"react\";\r\nimport AuthPresenter from \"./AuthPresenter\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CONFIRM_SECERT, CREATE_ACCOUNT, LOG_IN } from \"./AuthMutation\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport const LOGIN = \"LOGIN\";\r\nexport const JOIN = \"JOIN\";\r\nexport const SECRET = \"SECRET\";\r\n\r\nconst AuthContainer = () => {\r\n  //폼\r\n  const [action, setAction] = useState(LOGIN);\r\n  //로그인\r\n  const [userData, setUserData] = useState({\r\n    email: \"\",\r\n  });\r\n  //회원가입\r\n  const [joinData, setJoinData] = useState({\r\n    username: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n  });\r\n  const [userSecret, setUserSecret] = useState({\r\n    secret: \"\",\r\n  });\r\n\r\n  //로그인 gql\r\n  const [requestSecretMutation] = useMutation(LOG_IN, {\r\n    variables: {\r\n      email: userData.email,\r\n    },\r\n  });\r\n  //회원가입 gql\r\n  const [createAccountMutation] = useMutation(CREATE_ACCOUNT, {\r\n    variables: {\r\n      username: joinData.username,\r\n      firstName: joinData.firstName,\r\n      lastName: joinData.lastName,\r\n      email: joinData.email,\r\n    },\r\n  });\r\n  //시크릿 gql\r\n  const [confirmSecretMutation] = useMutation(CONFIRM_SECERT, {\r\n    variables: {\r\n      email: userData.email,\r\n      secret: userSecret.secret,\r\n    },\r\n  });\r\n\r\n  //서버통신\r\n  const onSubmit = async (e, form) => {\r\n    const a = userData.email.includes(\"@\");\r\n    const aa = joinData.email.includes(\"@\");\r\n    console.log(e, form);\r\n    e.preventDefault();\r\n\r\n    switch (form) {\r\n      //로그인\r\n      case LOGIN:\r\n        if (userData.email !== \"\") {\r\n          try {\r\n            const {\r\n              data: { requestSecret },\r\n            } = await requestSecretMutation();\r\n            if (!requestSecret || !a) {\r\n              toast.error(\"이메일을 다시 확인하세요\");\r\n            } else if (requestSecret && a) {\r\n              toast.success(\"메일이 전송 되었습니다.\");\r\n              setTimeout(() => {\r\n                setAction(SECRET);\r\n              }, 2000);\r\n            }\r\n          } catch {\r\n            toast.error(\"지금은 로그인 할 수 없습니다\");\r\n          }\r\n        } else {\r\n          toast.error(\"이메일을 입력하세요\");\r\n        }\r\n        break;\r\n\r\n      //회원가입\r\n      case JOIN: {\r\n        if (\r\n          joinData.email !== \"\" &&\r\n          joinData.firstName !== \"\" &&\r\n          joinData.username !== \"\" &&\r\n          joinData.lastName\r\n        ) {\r\n          try {\r\n            const {\r\n              data: { createAccount },\r\n            } = await createAccountMutation();\r\n            if (!createAccount || !aa) {\r\n              toast.error(\"회원정보를 다시 입력하세요\");\r\n            } else if (createAccount && aa) {\r\n              toast.success(\"회원가입 완료\");\r\n            }\r\n          } catch {\r\n            toast.error(\"회원가입을 할 수 없습니다, 다시 시도하세요\");\r\n          }\r\n        } else {\r\n          toast.error(\"모든항목을 입력하세요\");\r\n        }\r\n\r\n        break;\r\n      }\r\n      case SECRET: {\r\n        if (userSecret.secert !== \"\") {\r\n          try {\r\n            const {\r\n              data: { confirmSecret: token },\r\n            } = await confirmSecretMutation();\r\n            console.log(token);\r\n\r\n            if (token) {\r\n              localStorage.setItem(\"token\", token);\r\n              window.location.reload();\r\n            } else {\r\n              console.log(\"실패\");\r\n              localStorage.removeItem(\"token\");\r\n            }\r\n          } catch {\r\n            toast.error(\"암호가 일치하지 않습니다\");\r\n            localStorage.removeItem(\"token\");\r\n          }\r\n        } else {\r\n          toast.error(\"암호를 입력하세요\");\r\n          localStorage.removeItem(\"token\");\r\n        }\r\n      }\r\n      default:\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthPresenter\r\n      action={action}\r\n      setAction={setAction}\r\n      userData={userData}\r\n      setUserData={setUserData}\r\n      joinData={joinData}\r\n      setJoinData={setJoinData}\r\n      onSubmit={onSubmit}\r\n      userSecret={userSecret}\r\n      setUserSecret={setUserSecret}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AuthContainer;\r\n","D:\\prismagram-client\\src\\Routes\\Feed\\FeedPresenter.js",[],"D:\\prismagram-client\\src\\Routes\\Explore\\ExplorePresenter.js",[],"D:\\prismagram-client\\src\\Routes\\Auth\\AuthMutation.js",[],"D:\\prismagram-client\\src\\Routes\\Search\\SearchPresenter.js",[],"D:\\prismagram-client\\src\\Routes\\Auth\\AuthPresenter.js",[],"D:\\prismagram-client\\src\\Components\\Logo.js",[],"D:\\prismagram-client\\src\\Components\\Button.js",[],"D:\\prismagram-client\\src\\Routes\\Feed\\FeedMutation.js",[],"D:\\prismagram-client\\src\\Components\\Loader.js",[],{"ruleId":"123","replacedBy":"124"},{"ruleId":"125","replacedBy":"126"},{"ruleId":"127","severity":1,"message":"128","line":134,"column":7,"nodeType":"129","messageId":"130","endLine":134,"endColumn":15},"no-native-reassign",["131"],"no-negated-in-lhs",["132"],"no-fallthrough","Expected a 'break' statement before 'default'.","SwitchCase","default","no-global-assign","no-unsafe-negation"]